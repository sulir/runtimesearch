plugins {
    id 'org.jetbrains.intellij' version '0.6.5'
}

intellij {
    version '2020.3.2'
    plugins = ['java']
    updateSinceUntilBuild = false
    buildSearchableOptions.enabled = false
}

patchPluginXml {
    changeNotes = 'This is an early alpha version. An official release will come soon.'
}

dependencies {
     runtimeOnly(project(':runtimesearch-agent')) {
         transitive = false
     }
}

buildPlugin {
    destinationDirectory = project.file('../dist')
    archiveFileName = "${project.name}.zip"
}

runIde {
    jvmArgs '--add-exports', 'java.base/jdk.internal.vm=ALL-UNNAMED'
}

clean {
    delete buildPlugin.archiveFile
}